<!--Placeholder webpage-->

<h1>Placeholder Game webpage</h1>

<input id="activeCard" type="hidden"></input>
<button id="send" title="Play Card">Play Card</button>

<script>
    (function() {
        const sendBtn = document.querySelector('#send');
        const activeCard = document.querySelector('#activeCard')
    

        let ws;

        function playCard(card) {
            console.log(card)
        }

        function init() {
            if (ws) {
                ws.onerror = ws.open = ws.onclose = null;
                ws.close();
            }
        }

        ws = new WebSocket('ws.://localhost:8080');
        ws.onopen = () => {
            console.log('Connection opened!');
        }
        ws.onmessage = ({ data }) => playCard(data);
        ws.onclose = function() {
            ws = null;
        }

        sendBtn.onclick = function() {
            if (!ws) {
                showMessage("No Websocket connection");
                return;
            }
            
            ws.send(activeCard)
            playCard(activeCard)
        }
    })();
</script>